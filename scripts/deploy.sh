#!/bin/bash

# Скрипт для ручного обновления и перезапуска приложения на сервере

# Переходим в директорию проекта
cd "$(dirname "$0")/.." || exit

echo "=== Начинаем обновление приложения ==="

# Получаем последние изменения из репозитория
echo "Получение последних изменений из Git..."
git pull

# Перезапускаем приложение через docker-compose
echo "Перезапуск приложения..."
make rebuild

# Применяем миграции
echo "Применение миграций..."
make migrate

# Опционально: запуск seed данных
# echo "Запуск seed данных..."
# make seed

echo "=== Обновление завершено успешно ===" 